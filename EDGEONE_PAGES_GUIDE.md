# EdgeOne Pages éƒ¨ç½²æŒ‡å—

## ğŸš€ EdgeOne Pages å‡½æ•°éƒ¨ç½²æ¨¡å¼

æœ¬é¡¹ç›®å·²é…ç½®ä¸ºæ”¯æŒEdgeOne Pagesçš„å‡½æ•°éƒ¨ç½²æ¨¡å¼ï¼Œå¯ä»¥åˆ›å»ºçœŸæ­£çš„å…¨æ ˆåº”ç”¨ç¨‹åºã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
mu-blog/
â”œâ”€â”€ edge-functions/          # EdgeOne Pages å‡½æ•°ç›®å½•
â”‚   â”œâ”€â”€ api-handler.js      # APIå¤„ç†å‡½æ•°
â”‚   â””â”€â”€ admin-handler.js    # ç®¡ç†åå°å‡½æ•°
â”œâ”€â”€ src/                    # å‰ç«¯æºç 
â”œâ”€â”€ dist/client/           # æ„å»ºåçš„å‰ç«¯æ–‡ä»¶
â”œâ”€â”€ edgeone-pages.json     # EdgeOne Pagesé…ç½®æ–‡ä»¶
â””â”€â”€ package.json           # é¡¹ç›®é…ç½®
```

## ğŸ”§ éƒ¨ç½²é…ç½®

### 1. EdgeOne Pagesé…ç½®æ–‡ä»¶

`edgeone-pages.json` é…ç½®äº†ï¼š
- å‡½æ•°ç›®å½•ï¼š`edge-functions`
- æ„å»ºå‘½ä»¤ï¼š`npm run build`
- å‘å¸ƒç›®å½•ï¼š`dist/client`
- è·¯ç”±è§„åˆ™ï¼š
  - `/api/*` â†’ `api-handler` å‡½æ•°
  - `/admin*` â†’ `admin-handler` å‡½æ•°
  - `/*` â†’ é™æ€æ–‡ä»¶æœåŠ¡

### 2. ç¯å¢ƒå˜é‡é…ç½®

åœ¨EdgeOne Pagesæ§åˆ¶å°ä¸­é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```env
# æ•°æ®åº“é…ç½®
DATABASE_URL=your-turso-database-url
DATABASE_TOKEN=your-database-token

# å®‰å…¨é…ç½®
JWT_SECRET=your-jwt-secret

# ç®¡ç†å‘˜è´¦æˆ·
ADMIN_USERNAME=admin
ADMIN_PASSWORD=your-admin-password

# Twikooè¯„è®ºç³»ç»Ÿ
TWIKOO_ENV_ID=your-twikoo-env-id
```

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨EdgeOne CLIï¼ˆæ¨èï¼‰

1. **å®‰è£…EdgeOne CLI**
   ```bash
   # Windows
   iwr https://edgeone.cloud/install.ps1 -useb | iex
   
   # macOS/Linux
   curl -fsSL https://edgeone.cloud/install.sh | sh
   ```

2. **ç™»å½•è´¦æˆ·**
   ```bash
   edgeone login
   ```

3. **éƒ¨ç½²åˆ°Pages**
   ```bash
   # å¼€å‘æ¨¡å¼
   npm run pages:dev
   
   # ç”Ÿäº§éƒ¨ç½²
   npm run pages:deploy
   ```

### æ–¹æ³•äºŒï¼šé€šè¿‡EdgeOneæ§åˆ¶å°

1. ç™»å½• [EdgeOneæ§åˆ¶å°](https://edgeone.cloud)
2. è¿›å…¥PagesæœåŠ¡
3. åˆ›å»ºæ–°é¡¹ç›®æˆ–é€‰æ‹©ç°æœ‰é¡¹ç›®
4. è¿æ¥æ‚¨çš„GitHubä»“åº“
5. é…ç½®æ„å»ºè®¾ç½®ï¼š
   - æ„å»ºå‘½ä»¤ï¼š`npm run build`
   - å‘å¸ƒç›®å½•ï¼š`dist/client`
6. æ·»åŠ ç¯å¢ƒå˜é‡
7. ç‚¹å‡»éƒ¨ç½²

## ğŸ”§ å‡½æ•°è¯´æ˜

### APIå¤„ç†å‡½æ•° (`api-handler.js`)

å¤„ç†æ‰€æœ‰ `/api/*` è·¯å¾„çš„è¯·æ±‚ï¼š
- æ–‡ç« åˆ—è¡¨è·å–
- ç”¨æˆ·è®¤è¯
- ç®¡ç†ç»Ÿè®¡ä¿¡æ¯
- æ”¯æŒCORSè·¨åŸŸ

### ç®¡ç†åå°å‡½æ•° (`admin-handler.js`)

å¤„ç† `/admin*` è·¯å¾„çš„è¯·æ±‚ï¼š
- ç®¡ç†å‘˜ç™»å½•éªŒè¯
- åå°ä»ªè¡¨æ¿
- ç®¡ç†æ“ä½œç•Œé¢

## ğŸ¯ è·¯ç”±è§„åˆ™

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è·¯å¾„æ¨¡å¼    â”‚ å¤„ç†æ–¹å¼            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ /api/*      â”‚ Edgeå‡½æ•°å¤„ç†        â”‚
â”‚ /admin*     â”‚ ç®¡ç†å‡½æ•°å¤„ç†        â”‚
â”‚ /*          â”‚ é™æ€æ–‡ä»¶æœåŠ¡        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š ä¼˜åŠ¿ç‰¹ç‚¹

### âœ… æ— æœåŠ¡å™¨æ¶æ„
- è‡ªåŠ¨æ‰©ç¼©å®¹
- æŒ‰ä½¿ç”¨é‡ä»˜è´¹
- å…¨çƒè¾¹ç¼˜èŠ‚ç‚¹éƒ¨ç½²

### âœ… å…¨æ ˆèƒ½åŠ›
- å‰ç«¯é™æ€æ–‡ä»¶æœåŠ¡
- åç«¯APIå‡½æ•°å¤„ç†
- æ•°æ®åº“å­˜å‚¨æ”¯æŒ

### âœ… é«˜æ€§èƒ½
- è¾¹ç¼˜è®¡ç®—å°±è¿‘å¤„ç†
- CDNåŠ é€Ÿé™æ€èµ„æº
- æ¯«ç§’çº§å“åº”æ—¶é—´

## ğŸ” æœ¬åœ°å¼€å‘

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºé¡¹ç›®
npm run build

# é¢„è§ˆæ„å»ºç»“æœ
npm run preview
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å‡½æ•°æ‰§è¡Œè¶…æ—¶**
   - ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
   - å‡å°‘å‡½æ•°å¤„ç†æ—¶é—´
   - è€ƒè™‘æ•°æ®ç¼“å­˜

2. **CORSé”™è¯¯**
   - æ£€æŸ¥APIå‡½æ•°çš„CORSå¤´è®¾ç½®
   - ç¡®è®¤è¯·æ±‚æ¥æºåŸŸå

3. **ç¯å¢ƒå˜é‡æœªç”Ÿæ•ˆ**
   - åœ¨EdgeOneæ§åˆ¶å°é‡æ–°è®¾ç½®
   - æ£€æŸ¥å˜é‡åç§°æ˜¯å¦æ­£ç¡®
   - é‡æ–°éƒ¨ç½²åº”ç”¨

### è°ƒè¯•æŠ€å·§

```bash
# æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—
edgeone pages logs

# æœ¬åœ°æµ‹è¯•å‡½æ•°
edgeone pages dev

# æ£€æŸ¥æ„å»ºçŠ¶æ€
edgeone pages status
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **é™æ€èµ„æºä¼˜åŒ–**
   - å¯ç”¨Gzipå‹ç¼©
   - è®¾ç½®åˆé€‚çš„ç¼“å­˜ç­–ç•¥
   - ä½¿ç”¨CDNåŠ é€Ÿ

2. **å‡½æ•°ä¼˜åŒ–**
   - å‡å°‘å†·å¯åŠ¨æ—¶é—´
   - ä¼˜åŒ–æ•°æ®åº“è¿æ¥
   - å®æ–½å“åº”ç¼“å­˜

3. **æ•°æ®åº“ä¼˜åŒ–**
   - ä½¿ç”¨è¿æ¥æ± 
   - åˆç†è®¾è®¡ç´¢å¼•
   - å®æ–½æŸ¥è¯¢ç¼“å­˜

## ğŸ” å®‰å…¨æœ€ä½³å®è·µ

1. **è®¿é—®æ§åˆ¶**
   - å®æ–½JWTè®¤è¯
   - éªŒè¯è¯·æ±‚æ¥æº
   - é™åˆ¶APIè®¿é—®é¢‘ç‡

2. **æ•°æ®ä¿æŠ¤**
   - æ•æ„Ÿä¿¡æ¯ä½¿ç”¨ç¯å¢ƒå˜é‡
   - æ•°æ®åº“è¿æ¥åŠ å¯†
   - å®šæœŸè½®æ¢å¯†é’¥

3. **è¾“å…¥éªŒè¯**
   - éªŒè¯æ‰€æœ‰ç”¨æˆ·è¾“å…¥
   - å®æ–½å‚æ•°æ¶ˆæ¯’
   - é˜²æ­¢SQLæ³¨å…¥

---
é€šè¿‡EdgeOne Pageså‡½æ•°éƒ¨ç½²ï¼Œæ‚¨å¯ä»¥è·å¾—ç°ä»£åŒ–çš„å…¨æ ˆåº”ç”¨éƒ¨ç½²ä½“éªŒï¼Œäº«å—è¾¹ç¼˜è®¡ç®—å¸¦æ¥çš„æ€§èƒ½ä¼˜åŠ¿ï¼